{% extends 'website/base.html' %}
{% load static float_formatter %}


{% block body %}
    <body class="sub_page">
{% endblock body %}

{% block slide-section %}
    {# DO NOT write anything in this block! #}
{% endblock slide-section %}

{% block content %}


    <h1 style="text-align: center">Manage the menu items of `<span class="text-success">{{ category.label }}</span>`
        category</h1>
    <div class="d-flex justify-content-center">
        <div class="  my-4" style="min-height: 50vh">
            <table class="table table-striped align-middle">
                <thead class="table-dark">
                <tr>
                    <th scope="col">#</th>
                    <th scope="col"></th>
                    <th scope="col">Food Name</th>
                    <th scope="col">Description</th>
                    <th scope="col">Price</th>
                    <th scope="col">Discount</th>
                    <th scope="col">Inventory</th>
                    <th scope="col">
                        <a href="{% url 'manage-menu-item-add' %}">
                            <button type="button" class="btn btn-success py-0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
                                    <g fill="none" fill-rule="evenodd">
                                        <path d="M24 0v24H0V0zM12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z"></path>
                                        <path fill="currentColor"
                                              d="M9 5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v4h4a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-4v4a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-4H5a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2h4zm4 0h-2v5a1 1 0 0 1-1 1H5v2h5a1 1 0 0 1 1 1v5h2v-5a1 1 0 0 1 1-1h5v-2h-5a1 1 0 0 1-1-1z"></path>
                                    </g>
                                </svg>
                                Add Menu Item
                            </button>
                        </a>
                    </th>
                </tr>
                </thead>
                <tbody>

                {% for menu_item in category.menu_items.all|dictsort:"food_name" %}

                    <tr>
                        <th scope="row" class="align-middle">
                            {{ forloop.counter }}
                        </th>
                        <td>
                            {% if menu_item.image %}
                                <img src="{{ menu_item.image.url }}" alt="" class="rounded-circle"
                                     height="45"
                                     width="45">
                            {% else %}
                                <img src="{% static 'menu/images/default_menu_item_photo.png' %}" alt=""
                                     class="rounded-circle"
                                     height="45"
                                     width="45">

                            {% endif %}


                        </td>
                        <td class="align-middle">
                            <span> {{ menu_item.food_name }} </span>
                        </td>
                        <td class="align-middle">
                        <span>
                            {% if  menu_item.description|length > 35 %}
                                {{ menu_item.description|slice:":35" }}...
                            {% else %}
                                {{ menu_item.description }}
                            {% endif %}
                        </span>
                        </td>
                        <td class="align-middle text-center">
                            <span> ${{ menu_item.price }} </span>
                        </td>
                        <td class="align-middle text-center">
                            <span> {{ menu_item.discount|percentage }} </span>
                        </td>
                        <td class="align-middle text-center">
                            <span> {{ menu_item.inventory }} </span>
                        </td>
                        <td class="align-middle text-center">

                            <!-- edit -->
                            <a href="{% url 'manage-menu-item-update' menu_item.menu_category.slug menu_item.slug %}"
                               class="px-2" title="edit">
                                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
                                    <path fill="currentColor"
                                          d="M6.414 15.89L16.556 5.748l-1.414-1.414L5 14.476v1.414zm.829 2H3v-4.243L14.435 2.212a1 1 0 0 1 1.414 0l2.829 2.829a1 1 0 0 1 0 1.414zM3 19.89h18v2H3z"></path>
                                </svg>
                            </a>
                            <!-- edit -->

                            <!-- delete -->
                            <a href="#"
                               class="px-2"
                               title="Delete"
                               data-bs-toggle="modal"
                               data-bs-target="#{{ menu_item.food_name }}"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
                                    <path fill="none" stroke="red" stroke-linecap="round" stroke-linejoin="round"
                                          stroke-width="1.5"
                                          d="m19.5 5.5l-.402 6.506M4.5 5.5l.605 10.025c.154 2.567.232 3.85.874 4.774c.317.456.726.842 1.2 1.131c.671.41 1.502.533 2.821.57m10-7l-7 7m7 0l-7-7M3 5.5h18m-4.944 0l-.683-1.408c-.453-.936-.68-1.403-1.071-1.695a2 2 0 0 0-.275-.172C13.594 2 13.074 2 12.035 2c-1.066 0-1.599 0-2.04.234a2 2 0 0 0-.278.18c-.395.303-.616.788-1.058 1.757L8.053 5.5"
                                          color="currentColor">
                                    </path>
                                </svg>
                            </a>
                            <!-- Modal -->
                            <form action="{% url 'manage-menu-item-delete' category.slug menu_item.slug %}"
                                  method="post">
                                {% csrf_token %}
                                <div class="modal fade" id="{{ menu_item.food_name }}" tabindex="-1"
                                     aria-labelledby="exampleModalLabel"
                                     aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h1 class="modal-title fs-5" id="exampleModalLabel">Menu Item
                                                    Deletion</h1>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                        aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body" style="font-family:'Open Sans', sans-serif">
                                                Are you sure you want to delete
                                                "<span
                                                    class="text-danger font-weight-bold">{{ menu_item.food_name }}</span>"?
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                                    Cancel
                                                </button>
                                                <button type="submit" class="btn btn-danger">Delete</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                            <!-- Modal -->
                            <!-- delete -->

                        </td>
                    </tr>

                {% endfor %}

                </tbody>
            </table>
        </div>
    </div>
{% endblock content %}
